@using CMS.Main.Data
@using Microsoft.AspNetCore.Identity

@inject SignInManager<ApplicationUser> SignInManager

<ul class="flex flex-col gap-1">
    <li>
        <NavLink class="inline-flex items-center justify-start w-full bg-neutral-800 text-neutral-100 text-sm font-medium px-3 py-2 rounded-md hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-150" href="Account/Manage" Match="NavLinkMatch.All" aria-label="Profile">Profile</NavLink>
    </li>
    <li>
        <NavLink class="inline-flex items-center justify-start w-full bg-neutral-800 text-neutral-100 text-sm font-medium px-3 py-2 rounded-md hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-150" href="Account/Manage/Email" aria-label="Email">Email</NavLink>
    </li>
    <li>
        <NavLink class="inline-flex items-center justify-start w-full bg-neutral-800 text-neutral-100 text-sm font-medium px-3 py-2 rounded-md hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-150" href="Account/Manage/ChangePassword" aria-label="Password">Password</NavLink>
    </li>
    @if (hasExternalLogins)
    {
        <li>
            <NavLink class="inline-flex items-center justify-start w-full bg-neutral-800 text-neutral-100 text-sm font-medium px-3 py-2 rounded-md hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-150" href="Account/Manage/ExternalLogins" aria-label="External logins">External logins</NavLink>
        </li>
    }
    <li>
        <NavLink class="inline-flex items-center justify-start w-full bg-neutral-800 text-neutral-100 text-sm font-medium px-3 py-2 rounded-md hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-150" href="Account/Manage/TwoFactorAuthentication" aria-label="Two-factor authentication">Two-factor authentication</NavLink>
    </li>
    <li>
        <NavLink class="inline-flex items-center justify-start w-full bg-neutral-800 text-neutral-100 text-sm font-medium px-3 py-2 rounded-md hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-150" href="Account/Manage/PersonalData" aria-label="Personal data">Personal data</NavLink>
    </li>
</ul>

@code {
    private bool hasExternalLogins;

    protected override async Task OnInitializedAsync()
    {
        hasExternalLogins = (await SignInManager.GetExternalAuthenticationSchemesAsync()).Any();
    }

}