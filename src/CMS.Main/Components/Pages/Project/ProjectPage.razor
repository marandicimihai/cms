@page "/project/{ProjectId:guid}"
@rendermode InteractiveServer

@attribute [Authorize]

@if (ProjectDto is not null)
{
    <Paper>
        <h2 class="text-lg font-medium mb-3">Edit project properties:</h2>
        <EditForm Model="ProjectDto" OnValidSubmit="OnSaveName" class="flex flex-col gap-2">
            <div class="flex flex-col gap-2 flex-1">
                <label for="ProjectDto_Name" class="text-xs uppercase tracking-wide text-slate-600">Project Name</label>
                <InputText @bind-Value="ProjectDto.Name" id="ProjectDto_Name"
                            class="block w-full rounded-md border border-slate-300 shadow-sm text-sm px-3 py-2 focus:border-blue-500 focus:ring-blue-500"
                            placeholder="Enter project name" aria-label="Project Name"/>
                <ValidationMessage For="() => ProjectDto.Name" class="text-rose-600 text-xs"/>
            </div>
            <div class="flex gap-2">
                <PrimaryButton Type="submit" Variant="ButtonVariant.Info" Icon="save" aria-label="Save project name">Save</PrimaryButton>
                <SecondaryButton Type="button" Variant="ButtonVariant.Neutral" Icon="vpn_key" @onclick="@(() => NavigationManager.NavigateTo($"/{ProjectDto.Id}/manageApiKeys"))" aria-label="Manage API Keys">Manage API Keys</SecondaryButton>
                <PrimaryButton Type="button" Variant="ButtonVariant.Danger" Icon="delete" @onclick="OnDeleteProject" aria-label="Delete project">Delete Project</PrimaryButton>
            </div>
        </EditForm>
    </Paper>
    <ProjectSchemasSection Schemas="@ProjectDto.Schemas" ProjectId="@ProjectDto.Id"/>
}
