@page "/project/{ProjectId:guid}"
@rendermode InteractiveServer

@attribute [Authorize]

@if (ProjectDto is not null)
{
    <h2 class="text-lg font-medium text-neutral-100 mb-3">Edit project properties:</h2>
    <EditForm Model="ProjectDto" OnValidSubmit="OnSaveName" class="flex flex-col gap-4">
        <div class="flex flex-col gap-4 flex-1">
            <label for="ProjectDto_Name" class="text-xs uppercase tracking-wide text-neutral-400">Project Name</label>
            <InputText @bind-Value="ProjectDto.Name" id="ProjectDto_Name"
                        class="block w-full rounded-full border border-neutral-600 bg-neutral-700 shadow-sm text-neutral-100 px-4 py-3 focus:border-purple-500 focus:ring-purple-500"
                        placeholder="Enter project name" aria-label="Project Name"/>
            <ValidationMessage For="() => ProjectDto.Name" class="text-rose-600 text-xs"/>
        </div>
        <div class="flex gap-4">
            <PrimaryButton Type="submit" Variant="ButtonVariant.Primary" Icon="save" aria-label="Save project name">Save</PrimaryButton>
            <SecondaryButton Type="button" Variant="ButtonVariant.Neutral" Icon="vpn_key" @onclick="@(() => NavigationManager.NavigateTo($"/{ProjectDto.Id}/manageApiKeys"))" aria-label="Manage API Keys">Manage API Keys</SecondaryButton>
            <PrimaryButton Type="button" Variant="ButtonVariant.Danger" Icon="delete" @onclick="OnDeleteProject" aria-label="Delete project">Delete Project</PrimaryButton>
        </div>
    </EditForm>
    <ProjectSchemasSection Schemas="@ProjectDto.Schemas" ProjectId="@ProjectDto.Id"/>
}
