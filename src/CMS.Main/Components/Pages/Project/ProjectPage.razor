@page "/project/{ProjectId:guid}"
@rendermode InteractiveServer

@attribute [Authorize]

@if (ProjectDto is not null)
{
    <Paper>
        <PageHeader Class="mb-3">Project Details <Tag Value="@ProjectDto.Id">@ProjectDto.Id</Tag></PageHeader>
        <EditForm Model="ProjectDto" OnValidSubmit="OnSaveName" class="flex flex-col gap-1 mb-6">
        <DataAnnotationsValidator />
            <div class="flex flex-col gap-1 flex-1">
                <label for="ProjectDto_Name" class="text-xs uppercase tracking-wide text-neutral-400">Project Name</label>
                <InputText @bind-Value="ProjectDto.Name" id="ProjectDto_Name"
                            class="block w-full rounded-full border text-sm border-neutral-600 bg-neutral-700 shadow-sm text-neutral-100 px-3 py-2 focus:border-purple-500 focus:ring-purple-500"
                            placeholder="Enter project name" aria-label="Project Name"/>
                <ValidationMessage For="() => ProjectDto.Name" class="text-rose-600 text-xs"/>
            </div>
            <ButtonGroup>
                <PrimaryButton Type="submit" Variant="ButtonVariant.Primary" Icon="save" aria-label="Save project name">Save Name</PrimaryButton>
                <PrimaryButton Type="button" Variant="ButtonVariant.Neutral" Icon="vpn_key" @onclick="@(() => NavigationManager.NavigateTo($"/{ProjectDto.Id}/manageApiKeys"))" aria-label="Manage API Keys">API Keys</PrimaryButton>
                <PrimaryButton Type="button" Variant="ButtonVariant.Danger" Icon="delete" @onclick="OnDeleteProject" aria-label="Delete project">Delete</PrimaryButton>
            </ButtonGroup>
        </EditForm>
        <ProjectSchemasSection Schemas="@ProjectDto.Schemas" ProjectId="@ProjectDto.Id" OnSchemasChanged="RefreshProject"/>
    </Paper>
}
