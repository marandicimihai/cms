@page "/{projectId:guid}/manageapikeys"
@rendermode InteractiveServer

@attribute [Authorize]

@if (ProjectDto is not null)
{
    <BackButton Href="@($"/project/{ProjectId}")" Text="Back to Project" />

    <div class="flex items-center justify-between mb-4">
        <h1 class="text-lg font-medium text-neutral-100">API Keys</h1>
        @if (!createFormVisible)
        {
            <PrimaryButton Type="button" Variant="ButtonVariant.Primary" Icon="add" @onclick="ShowCreateForm">New API Key</PrimaryButton>
        }
    </div>

    <ApiKeyCreateForm @ref="createForm" ProjectId="@ProjectId.ToString()" Visible="@createFormVisible" OnSuccess="HideCreateForm" OnCancel="HideCreateForm" />

    <ApiKeyTable ApiKeys="ProjectDto.ApiKeys" />
}
else
{
    <BackButton />
}

