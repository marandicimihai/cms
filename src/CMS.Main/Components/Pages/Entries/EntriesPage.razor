@page "/schema/{schemaId:guid}/entries"
@rendermode InteractiveServer

@attribute [Authorize]

<PageTitle>CMS - Entries</PageTitle>

@if (Schema is not null)
{
    <BackButton Href="@($"/project/{Schema.ProjectId}")" Text="Back to Project"/>

    <Paper Class="mt-4">
        <HorizontalStack Justify="StackJustify.Between" Class="mb-4">
            <PageHeader>Entries</PageHeader>
            <PrimaryButton Type="button" Variant="ButtonVariant.Primary" Icon="add" @onclick="OpenCreateEntryModal">Add Entry</PrimaryButton>
        </HorizontalStack>

        <EntryViewingTable SchemaId="@SchemaId.ToString()" Properties="@Schema.Properties" />
    </Paper>

    <EntryCreateModal @ref="createEntryModal" SchemaId="@SchemaId" Properties="@Schema.Properties" OnEntryCreated="HandleEntryCreated" />
}
else
{
    <BackButton />
}