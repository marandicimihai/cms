@page "/schema/{schemaId:guid}/entries"
@rendermode InteractiveServer

@attribute [Authorize]

@if (Schema is not null)
{
    <BackButton Href="@($"/project/{Schema.ProjectId}")" Text="Back to Project"/>

    <Paper>
        <div class="flex items-center justify-between mb-4">
            <h1 class="text-lg font-medium text-slate-900">Entries</h1>
            @if (!showCreateForm)
            {
                <PrimaryButton Type="button" Variant="ButtonVariant.Primary" Icon="add" @onclick="ShowAddForm">Add Entry</PrimaryButton>
            }
        </div>

        @if (showCreateForm)
        {
            <div class="mb-4 rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
                <h2 class="text-sm font-medium text-slate-900 mb-3">New Entry</h2>
                <DynamicEntryForm @ref="entryCreateForm" Properties="Schema.Properties" OnValidSubmit="OnEntryCreateSubmit" OnCancel="HideAddForm"/>
            </div>
        }

        <EntryViewingTable SchemaId="@SchemaId.ToString()" Properties="@Schema.Properties" />
    </Paper>
}
else
{
    <BackButton />
}