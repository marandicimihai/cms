@page "/entry/{entryId:guid}/edit"
@rendermode InteractiveServer

<BackButton Href="@($"/schema/{Entry?.SchemaId}/entries")" Text="Back to Entries" />
<StatusIndicator @ref="statusIndicator" />

<AuthorizeView Policy="EntryPolicies.CanEditEntry" Resource="EntryId.ToString()">
    <Authorized>
        <div class="mb-4 rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
            <h2 class="text-sm font-medium text-slate-900 mb-3">Update entry</h2>
            @if (Entry is not null)
            {
                <DynamicEntryForm Properties="Entry.Schema.Properties" InitialValues="Entry.Properties.Values.ToList()" OnValidSubmit="UpdateEntry" />
            }
        </div>
    </Authorized>
</AuthorizeView>
